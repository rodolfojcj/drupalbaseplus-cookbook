#
# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.
#
<VirtualHost *:80>
  ServerName <%= @params[:server_name] %>
  DocumentRoot <%= @params[:docroot] %>

  <Directory />
    Options Indexes FollowSymLinks
    Order allow,deny
    allow from all
  </Directory>

  # disallow dangerous files
  # allow access to cron from localhost only
  <DirectoryMatch "/(?!(.+/)+)">
    <FilesMatch "^cron.php$">
      Order allow,deny
      Allow from 127.0.0.1
      Deny from all
    </FilesMatch>
  </DirectoryMatch>

  LogLevel info
  ErrorLog <%= @node[:apache][:log_dir] %>/<%= @params[:name] %>-error.log
  CustomLog <%= @node[:apache][:log_dir] %>/<%= @params[:name] %>-access.log combined
</VirtualHost>
